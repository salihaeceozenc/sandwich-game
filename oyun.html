<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sandvi√ß Ustasƒ± - Zamana Kar≈üƒ±</title>
    <style>
        /* GENEL AYARLAR */
        body {
            margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif;
            background-color: #c4dff6; 
            height: 100vh; display: flex; flex-direction: column; overflow: hidden; user-select: none;
        }

        /* √úST ALAN (TOP AREA) */
        .top-area {
            height: 45%; display: flex; justify-content: center; align-items: center; gap: 40px;
            background: #e3f2fd; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        .game-logo {
            position: absolute; top: 10px; left: 20px; font-size: 18px; font-weight: 900; color: #d35400;
            border: 3px solid #d35400; padding: 5px 15px; border-radius: 20px; background: white; transform: rotate(-3deg);
        }
        
        /* YENƒ∞: SAYA√á KUTUSU */
        .timer-box {
            position: absolute; top: 10px; right: 20px;
            font-size: 20px; font-weight: bold; color: #fff;
            background: #e74c3c; padding: 8px 20px; border-radius: 20px;
            box-shadow: 0 4px 0 #c0392b; display: flex; align-items: center; gap: 5px;
            animation: pulse 1s infinite;
        }
        @keyframes pulse { 0%{transform:scale(1);} 50%{transform:scale(1.05);} 100%{transform:scale(1);} }

        /* HEDEF KARTI */
        .target-card {
            background-color: #6cbce9; width: 200px; height: 300px; border-radius: 15px;
            box-shadow: 0 8px 0 #5a9bc2, 0 15px 20px rgba(0,0,0,0.2); border: 4px solid #8ecae6;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            position: relative; cursor: pointer; transition: transform 0.1s;
        }
        .target-card:active { transform: scale(0.98); }
        .target-sandwich-display {
            display: flex; flex-direction: column-reverse; align-items: center; gap: -2px; 
            transform: scale(0.8); transition: all 0.4s ease; margin-bottom: 20px;
        }
        .target-card:hover .target-sandwich-display, .target-card:active .target-sandwich-display {
            gap: 15px; transform: scale(0.7);
        }
        .hover-hint { position: absolute; bottom: 10px; font-size: 10px; color: #fff; opacity: 0.8; font-weight: bold; text-transform: uppercase; pointer-events: none; }
        
        /* ƒ∞PUCU BUTONU */
        .info-area { display: flex; flex-direction: column; align-items: center; gap: 8px; }
        .info-btn {
            width: 60px; height: 60px; background-color: #eda841; border-radius: 50%; display: flex; justify-content: center; align-items: center;
            font-size: 32px; font-weight: bold; color: #a16a23; box-shadow: 0 4px 0 #c68c36; cursor: pointer; border: none;
        }
        .info-btn:active { transform: translateY(4px); box-shadow: none; }
        .info-label { font-size: 14px; font-weight: bold; color: #5a7c96; }

        /* √áALI≈ûMA ALANI (WORK AREA) */
        .work-area {
            height: 25%; display: flex; justify-content: center; align-items: flex-end;
            position: relative; padding-bottom: 10px; background: #c4dff6;
        }
        .plate {
            width: 300px; height: 25px; background: #fff;
            border-radius: 50%; border-bottom: 5px solid #bdc3c7;
            box-shadow: 0 10px 20px rgba(0,0,0,0.15); position: relative; z-index: 1;
        }
        .player-stack {
            position: absolute; bottom: 30px;
            display: flex; flex-direction: column-reverse;
            align-items: center; 
            z-index: 100;
            transform: scale(0.8); transform-origin: bottom center;
        }

        /* KATMANLAR (MALZEMELER) */
        .layer {
            width: 140px; border-radius: 8px; position: relative; flex-shrink: 0;
            box-shadow: inset -5px 0 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
            animation: dropBounce 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 2;
        }
        .target-sandwich-display .layer { margin-bottom: -5px !important; box-shadow: 0 5px 5px rgba(0,0,0,0.1), inset -5px 0 10px rgba(0,0,0,0.1); }
        .player-stack .layer { margin-bottom: -5px !important; box-shadow: 0 3px 3px rgba(0,0,0,0.1), inset -5px 0 10px rgba(0,0,0,0.1); }
        @keyframes dropBounce { from{transform:translateY(-100px) scale(1.1); opacity:0;} to{transform:translateY(0) scale(1); opacity:1;} }

        /* Malzeme G√∂rselleri (CSS Drawing) */
        .l-bun-bottom { height: 35px; background: #d99e5a; border-radius: 15px 15px 40px 40px; border-bottom: 6px solid #c1843d; width: 150px; z-index: 1; }
        .l-bun-top { height: 55px; background: #d99e5a; border-radius: 60px 60px 15px 15px; border-bottom: 6px solid #c1843d; width: 160px; margin-bottom: 5px !important; z-index: 50; box-shadow: inset 0 10px 20px rgba(255,255,255,0.3); }
        .l-bun-top::after { content: ''; position: absolute; top: 10px; left: 25px; width: 5px; height: 5px; background: #f3d2a1; border-radius: 50%; box-shadow: 20px 5px 0 #f3d2a1, 40px 0 0 #f3d2a1, 60px 5px 0 #f3d2a1, 80px 0 0 #f3d2a1, 30px 15px 0 #f3d2a1, 70px 15px 0 #f3d2a1; }
        .l-meat { height: 30px; background: #6d3816; width: 155px; border-radius: 12px; border-bottom: 4px solid #4e270e; background-image: linear-gradient(90deg, transparent 50%, rgba(0,0,0,0.1) 50%); background-size: 20px 100%; }
        .l-chicken { height: 28px; background: #fdd835; width: 150px; border-radius: 12px; border: 3px solid #fbc02d; box-shadow: inset 0 0 10px #fff9c4; }
        .l-salami { height: 12px; background: #e57373; width: 145px; border-radius: 20px; border: 2px solid #c62828; }
        .l-cheese-cheddar { height: 10px; background: #ffd54f; width: 155px; border-radius: 4px; clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%); border-bottom: 2px solid #fbc02d; }
        .l-cheese-swiss { height: 10px; background: #fff59d; width: 150px; border-radius: 4px; background-image: radial-gradient(#fdd835 20%, transparent 25%); background-size: 15px 15px; }
        .l-cheese-white { height: 15px; background: #fafafa; width: 140px; border-radius: 4px; border: 1px solid #eee; }
        .l-lettuce { height: 18px; background: #74c04b; width: 165px; border-radius: 15px; background-image: radial-gradient(circle at 10px 0, transparent 6px, #74c04b 7px); background-size: 20px 20px; background-repeat: repeat-x; border-bottom: 3px solid #5a9638; }
        .l-tomato { height: 14px; background: #ff6348; width: 145px; border-radius: 8px; border: 2px solid #c0392b; background-image: radial-gradient(circle at 30% 50%, #ff7f50 2px, transparent 3px), radial-gradient(circle at 70% 50%, #ff7f50 2px, transparent 3px); }
        .l-onion { height: 8px; width: 140px; background: transparent; border: 3px solid #ab47bc; border-radius: 20px; }
        .l-sauce { height: 15px; width: 145px; border-radius: 8px 8px 0 0; margin-bottom: -14px; z-index: 5; clip-path: polygon(0% 0%, 100% 0%, 100% 75%, 90% 100%, 80% 70%, 70% 95%, 60% 70%, 50% 100%, 40% 70%, 30% 95%, 20% 70%, 10% 100%, 0% 75%); }
        .l-ketchup { background: #b71c1c; box-shadow: inset 0 5px 5px rgba(255,255,255,0.2); }
        .l-mayo { background: #fff9c4; border-top: 2px solid #fbc02d; }
        .l-mustard { background: #f57f17; box-shadow: inset 0 5px 5px rgba(255,255,255,0.2); }

        /* KONTROL PANELƒ∞ */
        .controls-area { height: 30%; background: #fff; border-top: 5px solid #bbdefb; padding: 10px; display: flex; gap: 10px; overflow-x: auto; }
        .col { flex: 1; min-width: 90px; background: #f1f8e9; border-radius: 10px; padding: 5px; border: 1px solid #c5e1a5; display: flex; flex-direction: column; align-items: center; }
        .col-title { font-size: 10px; font-weight: bold; color: #558b2f; margin-bottom: 5px; text-transform: uppercase; }
        .btn { width: 100%; padding: 8px; margin-bottom: 4px; background: white; border: 1px solid #ddd; border-bottom: 3px solid #ccc; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: bold; color: #333; display: flex; align-items: center; gap: 5px; transition: all 0.1s; }
        .btn:active { transform: translateY(3px); border-bottom: 1px solid #ccc; }
        .btn-bread { border-color: #d35400; color: #d35400; } .btn-meat { border-color: #5d4037; color: #5d4037; } .btn-veg { border-color: #2e7d32; color: #2e7d32; } .btn-cheese { border-color: #f39c12; color: #f39c12; }
        .action-col { display: flex; flex-direction: column; justify-content: center; gap: 8px; min-width: 100px; }
        .act-btn { padding: 12px; border: none; border-radius: 8px; font-weight: bold; color: white; cursor: pointer; box-shadow: 0 4px 0 rgba(0,0,0,0.2); }
        .btn-serve { background: #27ae60; } .btn-serve:active { transform: translateY(4px); box-shadow: none; }
        .btn-undo { background: #f39c12; } .btn-undo:active { transform: translateY(4px); box-shadow: none; }
        .btn-trash { background: #c0392b; } .btn-trash:active { transform: translateY(4px); box-shadow: none; }

        /* MODALLAR (PENCERELER) */
        .modal { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:none; justify-content:center; align-items:center; z-index:999; }
        .modal-box { background:white; padding:30px; border-radius:20px; text-align:center; border:5px solid #27ae60; animation:pop 0.3s; width: 300px; }
        .modal-box.lose { border-color: #c0392b; } /* Kaybetme rengi */
        @keyframes pop { from{transform:scale(0);} to{transform:scale(1);} }
        .modal-btn { background:#3498db; color:white; padding:10px 30px; border:none; border-radius:50px; font-size:18px; cursor:pointer; margin-top:20px; }
    </style>
</head>
<body>

    <div class="top-area">
        <div class="game-logo">ü•™ Usta ≈ûef</div>
        
        <div class="timer-box">
            ‚è±Ô∏è <span id="timer-display">40</span>
        </div>

        <div class="target-card" onclick="void(0)">
            <div class="target-sandwich-display" id="target-display"></div>
            <div class="hover-hint">üîç ƒ∞PUCU ƒ∞√áƒ∞N DOKUN</div>
        </div>
        <div class="info-area">
            <button class="info-btn" onclick="toggleRecipe()">?</button>
            <div class="info-label">TARƒ∞Fƒ∞ G√ñR</div>
        </div>
    </div>

    <div class="work-area">
        <div class="player-stack" id="player-stack"></div>
        <div class="plate"></div>
    </div>

    <div class="controls-area">
        <div class="col">
            <div class="col-title">Ekmek</div>
            <button class="btn btn-bread" onclick="add('bread-bottom')">üçû Alt</button>
            <button class="btn btn-bread" onclick="add('bread-top')">ü•Ø √úst</button>
        </div>
        <div class="col">
            <div class="col-title">Etler</div>
            <button class="btn btn-meat" onclick="add('meat')">ü•© K√∂fte</button>
            <button class="btn btn-meat" onclick="add('chicken')">üçó Tavuk</button>
            <button class="btn btn-meat" onclick="add('salami')">ü•ì Salam</button>
        </div>
        <div class="col">
            <div class="col-title">Peynir</div>
            <button class="btn btn-cheese" onclick="add('cheese-cheddar')">üßÄ √áedar</button>
            <button class="btn btn-cheese" onclick="add('cheese-swiss')">ü´ï ƒ∞svi√ßre</button>
            <button class="btn btn-cheese" onclick="add('cheese-white')">üßä Beyaz</button>
        </div>
        <div class="col">
            <div class="col-title">Ye≈üillik</div>
            <button class="btn btn-veg" onclick="add('lettuce')">ü•¨ Marul</button>
            <button class="btn btn-veg" onclick="add('tomato')">üçÖ Domates</button>
            <button class="btn btn-veg" onclick="add('onion')">üßÖ Soƒüan</button>
        </div>
        <div class="col">
            <div class="col-title">Sos</div>
            <button class="btn" onclick="add('sauce-ketchup')">üî¥ Ket√ßap</button>
            <button class="btn" onclick="add('sauce-mayo')">‚ö™ Mayonez</button>
            <button class="btn" onclick="add('sauce-mustard')">üü° Hardal</button>
        </div>
        <div class="action-col">
            <button class="act-btn btn-serve" onclick="checkWin()">‚úÖ SERVƒ∞S</button>
            <button class="act-btn btn-undo" onclick="undo()">‚Ü©Ô∏è Geri</button>
            <button class="act-btn btn-trash" onclick="resetPlayer()">üóëÔ∏è √á√∂p</button>
        </div>
    </div>

    <div class="modal" id="winModal">
        <div class="modal-box">
            <h1>üòã</h1>
            <h2>HARƒ∞KA!</h2>
            <p>Sipari≈ü doƒüru, m√º≈üteri bayƒ±ldƒ±!</p>
            <button class="modal-btn" onclick="newGame()">Sonraki Sipari≈ü ‚û°Ô∏è</button>
        </div>
    </div>

    <div class="modal" id="loseModal">
        <div class="modal-box lose">
            <h1>üò±</h1>
            <h2>S√úRE Bƒ∞TTƒ∞!</h2>
            <p>M√º≈üteri √ßok bekledi ve gitti.</p>
            <button class="modal-btn" style="background:#c0392b;" onclick="newGame()">Tekrar Dene üîÑ</button>
        </div>
    </div>

    <script>
        const DB = {
            'bread-bottom':   'layer l-bun-bottom',
            'bread-top':      'layer l-bun-top',
            'meat':           'layer l-meat',
            'chicken':        'layer l-chicken',
            'salami':         'layer l-salami',
            'cheese-cheddar': 'layer l-cheese-cheddar',
            'cheese-swiss':   'layer l-cheese-swiss',
            'cheese-white':   'layer l-cheese-white',
            'lettuce':        'layer l-lettuce',
            'tomato':         'layer l-tomato',
            'onion':          'layer l-onion',
            'sauce-ketchup':  'layer l-sauce l-ketchup',
            'sauce-mayo':     'layer l-sauce l-mayo',
            'sauce-mustard':  'layer l-sauce l-mustard'
        };

        let target = [];
        let player = [];
        
        // YENƒ∞: SAYA√á DEƒûƒ∞≈ûKENLERƒ∞
        let timeLeft = 40; // S√ºre (saniye)
        let timerId = null; // Sayacƒ± durdurmak i√ßin kimlik
        let isGameActive = false; // Oyun devam ediyor mu?

        window.onload = newGame;

        function newGame() {
            // Modallarƒ± kapat
            document.getElementById('winModal').style.display = 'none';
            document.getElementById('loseModal').style.display = 'none';
            
            player = [];
            updateDisplay('player-stack', player);
            
            // Hedef olu≈üturma
            target = ['bread-bottom'];
            const opts = Object.keys(DB).filter(k => k !== 'bread-bottom' && k !== 'bread-top');
            const count = Math.floor(Math.random() * 4) + 3;
            for(let i=0; i<count; i++) {
                const rand = opts[Math.floor(Math.random() * opts.length)];
                if(target[target.length-1] !== rand) target.push(rand);
                else i--;
            }
            target.push('bread-top');
            updateDisplay('target-display', target);

            // YENƒ∞: Sayacƒ± Ba≈ülat
            startTimer();
        }

        // YENƒ∞: ZAMANLAYICI FONKSƒ∞YONU
        function startTimer() {
            // √ñnceki saya√ß varsa temizle
            if(timerId) clearInterval(timerId);
            
            timeLeft = 40; // Saniyeyi buradan deƒüi≈ütirebilirsin
            document.getElementById('timer-display').innerText = timeLeft;
            isGameActive = true;

            timerId = setInterval(() => {
                timeLeft--;
                document.getElementById('timer-display').innerText = timeLeft;
                
                // Renk efekti (son 10 saniye kƒ±rmƒ±zƒ± yap)
                if(timeLeft <= 10) {
                    document.querySelector('.timer-box').style.backgroundColor = '#c0392b';
                } else {
                    document.querySelector('.timer-box').style.backgroundColor = '#e74c3c';
                }

                if(timeLeft <= 0) {
                    gameOver();
                }
            }, 1000); // 1000 milisaniye = 1 saniye
        }

        function gameOver() {
            clearInterval(timerId); // Sayacƒ± durdur
            isGameActive = false;
            document.getElementById('loseModal').style.display = 'flex';
        }

        function updateDisplay(elementId, stack) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            stack.forEach(itemKey => {
                const div = document.createElement('div');
                div.className = DB[itemKey];
                container.appendChild(div);
            });
        }

        function add(item) {
            // Oyun bittiyse ekleme yapma
            if(!isGameActive) return;
            
            player.push(item);
            updateDisplay('player-stack', player);
        }

        function undo() {
            if(!isGameActive) return;
            player.pop();
            updateDisplay('player-stack', player);
        }

        function resetPlayer() {
            if(!isGameActive) return;
            player = [];
            updateDisplay('player-stack', player);
        }

        function checkWin() {
            if(!isGameActive) return;

            if (JSON.stringify(player) === JSON.stringify(target)) {
                clearInterval(timerId); // Kazanƒ±nca s√ºreyi durdur
                document.getElementById('winModal').style.display = 'flex';
            } else {
                alert("Sipari≈ü Yanlƒ±≈ü! üßê\nMavi kutunun √ºzerine gelerek malzemeleri kontrol et.");
                const p = document.getElementById('player-stack');
                p.style.transform = 'translateX(10px) scale(0.8)';
                setTimeout(() => p.style.transform = 'translateX(-10px) scale(0.8)', 100);
                setTimeout(() => p.style.transform = 'translateX(0) scale(0.8)', 200);
            }
        }

        function toggleRecipe() {
            const trMap = {
                'bread-bottom': 'Alt Ekmek', 'bread-top': '√úst Ekmek', 'meat': 'K√∂fte', 'chicken': 'Tavuk',
                'salami': 'Salam', 'cheese-cheddar': '√áedar', 'cheese-swiss': 'ƒ∞svi√ßre P.', 'cheese-white': 'Beyaz P.',
                'lettuce': 'Marul', 'tomato': 'Domates', 'onion': 'Soƒüan',
                'sauce-ketchup': 'Ket√ßap', 'sauce-mayo': 'Mayonez', 'sauce-mustard': 'Hardal'
            };
            let recipeText = "üìã Sƒ∞PARƒ∞≈û Lƒ∞STESƒ∞:\n\n";
            target.forEach((item, index) => {
                recipeText += (index + 1) + ". " + trMap[item] + "\n";
            });
            alert(recipeText);
        }
    </script>
</body>
</html>